<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd">
    
    <!--这个构造器确保原类当中要有这样的构造器,那就是参数都是两个String 的-->
    <bean id="user1" class="org.zhouhy.spring.bean.User">
        <constructor-arg type="java.lang.String" value="AA"/>
        <constructor-arg type="java.lang.String" value="123456"/>
    </bean>
    
    <!--这里的xml会自动检测类型, 例如 index="2" 的 value="a" 它会报错,与它的类型不匹配-->
    <bean id="user2" class="org.zhouhy.spring.bean.User">
        <constructor-arg index="0" value="AA"/>
        <constructor-arg index="1" value="123456"/>
        <constructor-arg index="2" value="1"/>
    </bean>

    <!--
    这种注入的方式需要两个参数的构造器, 原类中有两个符合这种参数的构造器, 两个都是string, 两个都是Integer,
    但是spring 还是优先选取了两个string类型的构造器, 因为这个不需要做类型转换.
    注入的是string类型, spring是要通过转换才能变成Integer 类型    
    -->
    <bean id="user3" class="org.zhouhy.spring.bean.User">
        <constructor-arg index="0" value="22"/>
        <constructor-arg index="1" value="33"/>        
    </bean>
    
    
    <!--*************************************************以上是构造器注入的**************************************************-->
    
    
    <!--
    关于setter方法注入有这么两点需要注意
        1. 原类必须要有空构造器, 因为spring是通过原类的空构造器来创建实例的
        2. 注入属性的时候,原类必须要有相应的setter方法, 例如注入detail, 原类就要有setDetail方法
        3. 就是原类的空构造器如果是private的, 这并不妨碍spring创建这个实例.
     -->
    <bean id="address1"  class="org.zhouhy.spring.bean.Address">
        <property name="id" value="1"/>
        <property name="detail" value="ABC"/>
    </bean>

    <bean id="address2"  class="org.zhouhy.spring.bean.Address">
        <property name="id" value="2"/>
        <property name="detail" value="DEF"/>
    </bean>

    <bean id="address3"  class="org.zhouhy.spring.bean.Address">
        <property name="id" value="2"/>
        <property name="detail" value="DEF"/>
    </bean>
    
    
    <!--*****************************************************以上是setter注入的**********************************************-->

    <!--
    关于这个自定义转换器
        1. 转换器必须实现Converter接口, 并在convert方法里实现转换的内容
        2. 转换器必须注册在 ConversionServiceFactoryBean
        3. ConversionServiceFactoryBean 必须有id 而且必须id="conversionService"    
    -->
    
    <bean id="stu1" class="org.zhouhy.spring.bean.Student">
        <property name="id" value="1"/>
        <property name="name" value="Sam"/>
        <property name="birthday" value="2001-10-24"/>
    </bean>

    <bean id="stu2" class="org.zhouhy.spring.bean.Student">
        <property name="id" value="1"/>
        <property name="name" value="Frank"/>
        <property name="birthday" value="2002-12-23"/>
    </bean>
    
    <bean id="myDateConverter" class="org.zhouhy.spring.converter.MyDateConverter">
        <property name="pattern" value="yyyy-MM-dd"/>
    </bean>
    
    <bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <set>
                <ref bean="myDateConverter"/>
            </set>
        </property>
    </bean>
    
    <!--*********************************************************以上是自定义转换器的内容*****************************************-->
    <!--
        主要注意配置的配置基本类型和引用类型的区别, 另外当配置properties 不能写成<prop key="1" value="one"></prop>
        这点跟map是不同的,另外需要注意的是, properties 没有引用类型    
    -->
    
    <bean id="account" class="org.zhouhy.spring.bean.Account">
        <property name="id" value="1"/>
        <property name="name" value="Sam"/>
        <property name="array">
            <array>
                <value>abc</value>
                <value>2</value>
                <value>bcd</value>
            </array>
        </property>
        <property name="list">
            <list>
                <value>3</value>
                <value>qwq</value>
                <value>"qwq"</value>
            </list>
        </property>
        <property name="set">
            <set>
                <ref bean="address1"></ref>
                <ref bean="address2"></ref>
                <ref bean="address3"></ref>
            </set>
        </property>
        <property name="map">
            <map>
                <entry key="a" value="AAA"/>
                <entry key="b" value="BBB"/>
                <entry key="c" value="CCC"/>
            </map>
        </property>
        <property name="users">
            <map>
                <entry key="user1" value-ref="user1"/>
                <entry key="user2" value-ref="user2"/>
                <entry key="user3" value-ref="user3"/>
            </map>
        </property>
        <property name="properties">
            <props>
                <prop key="1">one</prop>
                <prop key="2">two</prop>
            </props>
        </property>       
    </bean>
    <!--***********************************************************以上是关于集合类的配置*******************************************-->
    
    
</beans>